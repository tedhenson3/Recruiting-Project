View(players1)
next.tag <- '//*[contains(concat( " ", @class, " " ), concat( " ", "paginationElement", " " )) and (((count(preceding-sibling::*) + 1) = 1) and parent::*)]//a[(((count(preceding-sibling::*) + 1) = 14) and parent::*)]'
next.page <- remDr$findElement(using = 'css selector', value = '.pagination')
next.page$clickElement()
next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
# t <- remDr$findElements(using = 'xpath', value = player.tag)
#
# players1=list()
# players1=sapply(t, function(x){x$getElementText()})
# head(players1)
library(rvest)
#prep.circuit <- 'https://www.prepcircuit.com/stats/league_instance/58521?subseason=412391'
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
# t <- remDr$findElements(using = 'xpath', value = player.tag)
#
# players1=list()
# players1=sapply(t, function(x){x$getElementText()})
# head(players1)
library(rvest)
#prep.circuit <- 'https://www.prepcircuit.com/stats/league_instance/58521?subseason=412391'
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
score <- remDr$findElement(using = 'css selector', value = scoring.tag)
score$clickElement()
scoring.tag <- '#sm-basketball_scoring a'
score <- remDr$findElement(using = 'css selector', value = scoring.tag)
score$clickElement()
next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
ted <- remDr$findElement(using = 'css selector', value = next.tag)
ted$clickElement()
# t <- remDr$findElements(using = 'xpath', value = player.tag)
#
# players1=list()
# players1=sapply(t, function(x){x$getElementText()})
# head(players1)
library(rvest)
#prep.circuit <- 'https://www.prepcircuit.com/stats/league_instance/58521?subseason=412391'
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
library(readr)
maxpreps <- read_csv(file = "maxpreps.16-17.csv")
espn <- read_csv(file = "espn.top.state.2017.csv")
test <- inner_join(maxpreps, espn, by = "Name")
library(tidyverse)
library(readr)
maxpreps <- read_csv(file = "maxpreps.16-17.csv")
espn <- read_csv(file = "espn.top.state.2017.csv")
test <- inner_join(maxpreps, espn, by = "Name")
View(test)
View(espn)
View(maxpreps)
nrow(espn)
nrow(maxpreps)
nrow(test)
# t <- remDr$findElements(using = 'xpath', value = player.tag)
#
# players1=list()
# players1=sapply(t, function(x){x$getElementText()})
# head(players1)
library(rvest)
#prep.circuit <- 'https://www.prepcircuit.com/stats/league_instance/58521?subseason=412391'
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
roster.tag <- 'href="/roster_players'
t <- remDr$findElements(using = 'css selector', value = roster.tag)
?remDr$findelements
roster.tag <- '/roster_players'
t <- remDr$findElements(using = 'link text', value = roster.tag)
players1=list()
players1=sapply(t, function(x){x$getElementText()})
length(players1)
View(players1)
roster.tag <- 'roster_players'
t <- remDr$findElements(using = 'link text', value = roster.tag)
t
class.name <- 'statPlayer '
t <- remDr$findElements(using = 'class name', value = roster.tag)
players1=list()
players1=sapply(t, function(x){x$getElementText()})
length(players1)
View(players1)
team.tag <- '.teamName'
t <- remDr$findElements(using = 'css selector', value = team.tag)
players1=list()
players1=sapply(t, function(x){x$getElementText()})
length(players1)
View(players1)
teams <- as.data.frame(players1)
teams
teams <- c(players1)
teams
players1=c()
players1=sapply(t, function(x){x$getElementText()})
players1
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
t <- remDr$findElements(using = 'css selector', value = team.tag)
players1=c()
players1=sapply(t, function(x){x$getElementText()})
teams <- c(players1)
teams
players1=c()
players1=sapply(t, function(x){x$getElementText()})
teams2 <- c(players1)
allt <- c(teams, teams2)
allt
t <- remDr$findElements(using = 'css selector', value = '#player-sm-basketball_misc-table a')
players1=c()
players1=sapply(t, function(x){x$getElementText()})
teams2 <- c(players1)
teams2
t <- remDr$findElements(using = 'css selector', value = '#player-sm-basketball_player-table a')
players1=c()
players1=sapply(t, function(x){x$getElementText()})
teams2 <- c(players1)
teams2
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
team.class <- 'teamName'
score <- remDr$findElement(using = 'css selector', value = '.current+ a')
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = '.current+ a')
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = '.pagination')
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = '.pagination a')
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = '.pagination a')
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = '.current .pagination a')
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
see <- '.paginationElement:nth-child(1) .current+ a'
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
t2 <- remDr$findElements(using = 'class name', value = team.class)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
View(odd.players2)
new.teams <- odd.players[[which(odd.players2 != "")]][1]
new.teams <- odd.players2[[which(odd.players2 != "")]][1]
which(odd.players2 != "")
odd.players2[[which(odd.players2 != "")]]
odd.players2[[which(odd.players2 != "")]][1]
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams
new.teams <- new.teams[[1:13]]
new.teams[1]
new.teams[2]
new.teams[3]
new.teams <- new.teams[1:length(new.teams)]
new.teams
do.call( rbind, new.teams)[,1]
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
new.teams
prep.teams <- new.teams
prep.teams
team.class <- 'teamName'
see <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
while(i < 31){
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
prep.teams$link <- c(new.teams, prep.teams$link)
i = i + 1
Sys.sleep(time = 2)
}
i <- 1
while(i < 31){
score <- remDr$findElement(using = 'css selector', value = see)
score$clickElement()
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
prep.teams$link <- c(new.teams, prep.teams$link)
i = i + 1
Sys.sleep(time = 2)
}
team.class <- 'teamName'
next.class <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
i <- 1
while(i < 31){
score <- remDr$findElement(using = 'css selector', value = next.class)
score$clickElement()
Sys.sleep(time = 2)
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
prep.teams$link <- c(new.teams, prep.teams$link)
i = i + 1
}
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
next.class <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
i <- 1
while(i < 31){
score <- remDr$findElement(using = 'css selector', value = next.class)
score$clickElement()
Sys.sleep(time = 2)
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
if(i == 1){
prep.teams$link <- new.teams
}
else{
prep.teams$link <- c(new.teams, prep.teams$link)
}
i = i + 1
}
team.class <- 'teamName'
next.class  <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
i <- 1
while(i < 31){
score <- remDr$findElement(using = 'css selector', value = next.class)
score$clickElement()
Sys.sleep(time = 2)
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
if(i == 1){
all.teams <- new.teams
}
else{
all.teams <- c(new.teams, all.teams)
}
i = i + 1
}
#
# next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
#
#
# score <- remDr$findElement(using = 'css selector', value = next.tag)
#
# score$clickElement()
#
# #note, when you get to last child listed on initial page, it goes to the end)
#
#
# t3 <- remDr$findElements(using = 'class name', value = team.class)
#
# #t$getElementAttributes('href')
#
# Sys.sleep(time = 2)
#
#
#
View(all.teams)
unique.teams <- unique(all.teams)
setwd("~/recruiting project")
setwd("~/analytics/recruiting project")
write.csv(unique.teams, file = 'prep.circuit.teams.15-16.csv')
write.csv(unique.teams, file = 'prep.circuit.teams.15-16.csv', row.names = F)
write.csv(unique.teams, file = 'prep.circuit.teams.15-16.csv', row.names = F)
team.class <- 'teamName'
next.class  <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
i <- 1
while(i < 31){
if(i > 1){
score <- remDr$findElement(using = 'css selector', value = next.class)
score$clickElement()
Sys.sleep(time = 2)
}
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
if(i == 1){
all.teams <- new.teams
}
else{
all.teams <- c(new.teams, all.teams)
}
i = i + 1
}
unique.teams <- unique(all.teams)
write.csv(unique.teams, file = 'prep.circuit.teams.15-16.csv', row.names = F)
#
# next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
#
#
# score <- remDr$findElement(using = 'css selector', value = next.tag)
#
# score$clickElement()
#
# #note, when you get to last child listed on initial page, it goes to the end)
#
#
# t3 <- remDr$findElements(using = 'class name', value = team.class)
#
# #t$getElementAttributes('href')
#
# Sys.sleep(time = 2)
#
#
#
# odd.players3=c()
# odd.players3=sapply(t3, function(x) {x$getElementAttribute('href')})
# View(odd.players3)
