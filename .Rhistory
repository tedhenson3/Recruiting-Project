View(fresh)
View(espn_top_state_2017)
View(prep_circuit_players_stats)
espn_top_state_2017$Name[436]
espn_top_state_2017$Name[4]
espn_top_state_2017$Name
View(espn_top_state_2017)
espn_top_state_2017[which(espn_top_state_2017$Name)]
View(espn_top_state_2017)
?trimws
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep_circuit_players_stats <- read_csv("prep.circuit.players.stats.csv")
library(readr)
espn_top_state_2017 <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn_top_state_2017$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep_circuit_players_stats$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
fresh <- inner_join(espn_top_state_2017, prep_circuit_players_stats,
by = 'Name')
nrow(fresh)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep_circuit_players_stats <- read_csv("prep.circuit.players.stats.csv")
library(readr)
espn_top_state_2017 <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn_top_state_2017$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep_circuit_players_stats$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
fresh <- anti_join(espn_top_state_2017, prep_circuit_players_stats,
by = 'Name')
nrow(fresh)
View(fresh)
library(rvest)
library(tidyverse)
library(readr)
setwd("~/analytics/recruiting project")
preps = read_csv(file = 'prep.circuit.teams.15-16.csv')
preps = preps$x
View(preps)
prep.15.16 <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
prep <- c("https://www.prepcircuit.com/stats/league_instance/47994?subseason=336137")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
team.class <- 'teamName'
next.class  <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
i <- 1
while(i < 31){
if(i > 1){
score <- remDr$findElement(using = 'css selector', value = next.class)
score$clickElement()
Sys.sleep(time = 2)
}
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
if(i == 1){
all.teams <- new.teams
}
else{
all.teams <- c(new.teams, all.teams)
}
i = i + 1
}
unique.teams <- unique(all.teams)
write.csv(unique.teams, file = 'prep.circuit.teams.16-17.csv', row.names = F)
library(rvest)
library(tidyverse)
library(readr)
setwd("~/analytics/recruiting project")
preps = read_csv(file = 'prep.circuit.teams.16-17.csv')
preps = preps$x
for(i in 1:length(preps)){
img.actual = preps[i]
print(i / 127 * 100)
#img.actual <- 'https://www.prepcircuit.com/page/show/2126352?subseason=245525&tab=content'
stats = img.actual %>%
readLines()
test = grep('remote-tool-tab', stats)
if(length(test) != 0){
new.stats = stats[test]
player.stat.link <- grep('Player Stats', new.stats)
player.stats <- new.stats[player.stat.link]
player.stats = strsplit(player.stats, 'href=\"')
player.stats = player.stats[[1]][2]
player.stats = strsplit(player.stats, '\"')
player.stats = player.stats[[1]][1]
player.stats = gsub("&amp;", "&", player.stats, fixed = T)
player.stats = paste('https://www.prepcircuit.com', player.stats, sep = '')
team.stat.tables = player.stats %>%
read_html() %>%       html_table()
for(e in 1:length(team.stat.tables)){
colnames(team.stat.tables[[e]])[colnames(team.stat.tables[[e]]) == 'GP'] <-  paste('gp', e, sep = '.')
if(e == 1){
finish = team.stat.tables[[e]]
}
else{
other.table = team.stat.tables[[e]]
other.table = other.table[,2:ncol(other.table)]
finish = full_join(x = finish, y = other.table,
by = 'Name')
#print(finish)
}
}
if(exists("players") == T){
ted = finish
#print(ted)
#ted = as.data.frame(team.stat.tables[[1]])
library(plyr)
players = rbind.fill(players, ted)
#View(players)
#print(players)
}
else{
players = finish
#players = as.data.frame(team.stat.tables[[1]])
}
}
}
write.csv(players, file = 'prep.circuit.players.stats.16-17.csv', row.names = FALSE)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep_circuit_players_stats <- read_csv("prep.circuit.players.stats.csv")
library(readr)
espn_top_state_2017 <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn_top_state_2017$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep_circuit_players_stats$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
fresh <- anti_join(espn_top_state_2017, prep_circuit_players_stats,
by = 'Name')
nrow(fresh)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep_circuit_players_stats <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn_top_state_2017 <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn_top_state_2017$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep_circuit_players_stats$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
fresh <- anti_join(espn_top_state_2017, prep_circuit_players_stats,
by = 'Name')
nrow(fresh)
View(prep_circuit_players_stats)
fresh <- inner_join(espn_top_state_2017, prep_circuit_players_stats,
by = 'Name')
nrow(fresh)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep_circuit_players_stats <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn_top_state_2017 <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn_top_state_2017$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep_circuit_players_stats$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
fresh <- inner_join(espn_top_state_2017, prep_circuit_players_stats,
by = 'Name')
nrow(fresh)
View(espn_top_state_2017)
nrow(fresh)
View(prep_circuit_players_stats)
View(fresh)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
#rankings.espn <- read_csv(file = 'rankings.espn.csv')
# rankings.247 <- read_csv(file = 'rankings.247.csv')
#
#
# espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
#                       suffix = c(".espn", ".247"))
#
#
#ask Dr Mario what to do
espn.247 <- read_csv(file = 'espn.top.state.2017.csv')
View(espn.247)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
first.last <- strsplit(lower.player, ' ')
#print(first.last)
player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = player.id
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
first.last <- strsplit(lower.player, ' ')
#print(first.last)
player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = player.id
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn_top_state_2017$Name,
which = 'both')
prep$Name <- trimws(prep_circuit_players_stats$Name,
which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
first.last <- strsplit(lower.player, ' ')
#print(first.last)
player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = player.id
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
first.last <- strsplit(lower.player, ' ')
#print(first.last)
player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = player.id
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn$Name,  which = 'both')
prep$Name <- trimws(prep$Name, which = 'both')
lower.player <- tolower(espn$Name)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn$Name,  which = 'both')
prep$Name <- trimws(prep$Name, which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
first.last <- strsplit(lower.player, ' ')
#print(first.last)
player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = player.id
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
first.last <- strsplit(lower.player, ' ')
#print(first.last)
player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = player.id
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
espn$player.id
espn$Name <- trimws(espn$Name,  which = 'both')
espn$Name
lower.player <- tolower(espn$Name)
lower.player
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn$Name,  which = 'both')
prep$Name <- trimws(prep$Name, which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
# first.last <- strsplit(lower.player, ' ')
#
# #print(first.last)
#
# player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = lower.player
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
#first.last <- strsplit(lower.player, ' ')
#print(first.last)
#player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = lower.player
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn$Name,  which = 'both')
prep$Name <- trimws(prep$Name, which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
# first.last <- strsplit(lower.player, ' ')
#
# #print(first.last)
#
# player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = lower.player
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
#first.last <- strsplit(lower.player, ' ')
#print(first.last)
#player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = lower.player
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
nrow(espn)
View(espn)
View(fresh)
View(prep)
prep[which(prep$player.id == 'michael porterjr'),]
espn[which(espn$player.id == 'michael porterjr'),]
prep[which(prep$player.id contains 'michael porterjr'),]
prep[which(prep$player.id == 'michael porterjr '),]
?grepl
prep[which(grepl('porterjr', prep$player.id)),]
weird = prep[which(grepl('porterjr', prep$player.id)),]
print(weird$player.id)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn$Name,  which = 'both')
prep$Name <- trimws(prep$Name, which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
lower.player = gsub("\\s+", "-", lower,player)
# first.last <- strsplit(lower.player, ' ')
#
# #print(first.last)
#
# player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = lower.player
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
library(stringr)
lower.player = gsub("\\s+", "-", lower,player)
#first.last <- strsplit(lower.player, ' ')
#print(first.last)
#player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = lower.player
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
nrow(espn)
setwd("~/analytics/recruiting project")
library(readr)
library(readr)
prep <- read_csv("prep.circuit.players.stats.16-17.csv")
library(readr)
espn <- read_csv("espn.top.state.2017.csv")
library(tidyverse)
espn$Name <- trimws(espn$Name,  which = 'both')
prep$Name <- trimws(prep$Name, which = 'both')
lower.player <- tolower(espn$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
lower.player = gsub("\\s+", "-", lower.player)
# first.last <- strsplit(lower.player, ' ')
#
# #print(first.last)
#
# player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
espn$player.id = lower.player
lower.player <- tolower(prep$Name)
lower.player <- gsub(" jr.", "jr", lower.player, fixed = T)
lower.player <- gsub(" sr.", "sr", lower.player, fixed = T)
lower.player <- gsub(" iii", "iii", lower.player, fixed = T)
lower.player <- gsub(" ii", "ii", lower.player, fixed = T)
lower.player <- gsub(" iv", "iv", lower.player, fixed = T)
lower.player <- gsub(".", "", lower.player, fixed = T)
lower.player <- gsub(",iii", "iii", lower.player, fixed = T)
lower.player <- gsub("'", "", lower.player, fixed = T)
library(stringr)
lower.player = gsub("\\s+", "-", lower.player)
#first.last <- strsplit(lower.player, ' ')
#print(first.last)
#player.id <- paste(first.last[[1]][1:length(first.last[[1]])], collapse = "-")
prep$player.id = lower.player
fresh <- inner_join(espn, prep,
by = 'player.id')
nrow(fresh)
nrow(espn)
View(fresh)
View(espn)
