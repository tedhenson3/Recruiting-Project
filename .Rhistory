}
}
}
View(high.school)
maxpreps <- c("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/california/stat-leaders.htm?classyear=all&position=all")
css.tags <- '.dw , .name a'
library(tidyverse)
library(rvest)
stats = maxpreps %>%
read_html() %>%
html_table()
high.school <- as.data.frame(stats[[1]])
split <- strsplit(high.school$Name, ' - ')
for(i in 1:length(split)){
high.school[i, 'Name'] <-  split[[i]][1]
substring_list <- c("Sr", "Jr", "So", "Fr")
junk <- split[[i]][2]
j <- 1
while(j < 5){
new.junk <- strsplit(junk, substring_list[j])
if(length(new.junk[[1]]) == 2){
high.school[i, 'Class'] <- substring_list[j]
high.school[i, 'High.School'] <- new.junk[[1]][2]
j <- 5
}
if(length(new.junk[[1]]) == 1){
j <- j + 1
}
}
}
View(high.school)
top = .98 * .01
bottom = (.98*.01) + (.99*.02)
top / bottom
top = .25*.6
bottom = (.25*.6) + (.5*.4)
top / bottom
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
#write.csv(data, file = 'successfull.scrapes.csv', row.names = F)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
#write.csv(data, file = 'successfull.scrapes.csv', row.names = F)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
#write.csv(data, file = 'successfull.scrapes.csv', row.names = F)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
#write.csv(data, file = 'successfull.scrapes.csv', row.names = F)
View(data)
data$link
setwd("~/analytics/recruiting project")
library(tidyverse)
library(readr)
rankings.espn <- read_csv(file = 'rankings.espn.csv')
rankings.247 <- read_csv(file = 'rankings.247.csv')
espn.247 <- full_join(rankings.espn, rankings.247, by = "player.id",
suffix = c(".espn", ".247"))
espn.247$School <- gsub("N Carolina", "UNC", espn.247$School)
espn.247$School <- gsub("Miss. St", "Mississippi State", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
espn.247$School <- gsub("W Kentucky", "Western Kentucky", espn.247$School)
rownames(espn.247) <- NULL
#View(espn.247)
source("~/analytics/recruiting project/basketball reference win share scraper.R")
espn.247 <- espn.247 %>% filter(!is.na(Name.espn) & School != 'unknown')
data <- wsscraper(data = espn.247)
data
View(data)
write.csv(data, file = 'successfull.scrapes.csv', row.names = F)
state.name
maxpreps <- c("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/california/stat-leaders.htm?classyear=all&position=all")
#vector of state names: state.name
#two word states, seperate by a plus
#http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/stat-leaders-10.htm?classyear=all&position=all
#each page only goes to 10 no matter what
#state.list <- c("california", "georgia", "alabama", ....)
my.states <- tolower(state.name)
my.states <- gsub(" ", "+", my.states, fixed = T)
print(my.states)
my.states <- tolower(state.name)
my.states <- gsub(" ", "+", my.states, fixed = T)
print(my.states)
library(tidyverse)
library(rvest)
for(r in 1:length(my.states)){
state <- my.states[r]
for(q in 1:10){
if(q > 1){
maxpreps <- paste("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/",
state,
"/stat-leaders-",
q,
".htm?classyear=all&position=all",
sep = "")
}
else{
maxpreps <- paste("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/",
state,
"/stat-leaders",
".htm?classyear=all&position=all",
sep = "")
}
stats = maxpreps %>%
read_html() %>%
html_table()
high.school <- as.data.frame(stats[[1]])
split <- strsplit(high.school$Name, ' - ')
for(i in 1:length(split)){
high.school[i, 'Name'] <-  split[[i]][1]
substring_list <- c("Sr", "Jr", "So", "Fr")
junk <- split[[i]][2]
j <- 1
while(j < 5){
new.junk <- strsplit(junk, substring_list[j])
if(length(new.junk[[1]]) == 2){
high.school[i, 'Class'] <- substring_list[j]
high.school[i, 'High.School'] <- new.junk[[1]][2]
j <- 5
}
if(length(new.junk[[1]]) == 1){
j <- j + 1
}
}
}
if(r == 1 & q ==1){
all.stats <- high.school
}
else{
all.stats <- rbind(all.stats, high.school)
}
}
}
#two word states, seperate by a plus
#http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/stat-leaders-10.htm?classyear=all&position=all
#each page only goes to 10 no matter what
#state.list <- c("california", "georgia", "alabama", ....)
my.states <- tolower(state.name)
my.states <- gsub(" ", "+", my.states, fixed = T)
print(my.states)
library(tidyverse)
library(rvest)
for(r in 1:length(my.states)){
state <- my.states[r]
for(q in 1:10){
if(q > 1){
maxpreps <- paste("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/",
state,
"/stat-leaders-",
q,
".htm?classyear=all&position=all",
sep = "")
}
else{
maxpreps <- paste("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/",
state,
"/stat-leaders",
".htm?classyear=all&position=all",
sep = "")
}
stats = maxpreps %>%
read_html() %>%
html_table()
high.school <- as.data.frame(stats[[1]])
split <- strsplit(high.school$Name, ' - ')
for(i in 1:length(split)){
high.school[i, 'Name'] <-  split[[i]][1]
substring_list <- c("Sr", "Jr", "So", "Fr")
junk <- split[[i]][2]
j <- 1
while(j < 5){
new.junk <- strsplit(junk, substring_list[j])
if(length(new.junk[[1]]) == 2){
high.school[i, 'Class'] <- substring_list[j]
high.school[i, 'High.School'] <- new.junk[[1]][2]
j <- 5
}
if(length(new.junk[[1]]) == 1){
j <- j + 1
}
}
}
if(r == 1 & q ==1){
all.stats <- high.school
}
else{
all.stats <- rbind(all.stats, high.school)
print(all.stats)
}
}
}
#vector of state names: state.name
#two word states, seperate by a plus
#http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/stat-leaders-10.htm?classyear=all&position=all
#each page only goes to 10 no matter what
#state.list <- c("california", "georgia", "alabama", ....)
my.states <- tolower(state.name)
my.states <- gsub(" ", "+", my.states, fixed = T)
print(my.states)
library(tidyverse)
library(rvest)
for(r in 1:length(my.states)){
state <- my.states[r]
for(q in 1:10){
if(q > 1){
maxpreps <- paste("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/",
state,
"/stat-leaders-",
q,
".htm?classyear=all&position=all",
sep = "")
}
else{
maxpreps <- paste("http://www.maxpreps.com/leaders/basketball-winter-16-17/,scoring/",
state,
"/stat-leaders",
".htm?classyear=all&position=all",
sep = "")
}
stats = maxpreps %>%
read_html() %>%
html_table()
high.school <- as.data.frame(stats[[1]])
split <- strsplit(high.school$Name, ' - ')
for(i in 1:length(split)){
high.school[i, 'Name'] <-  split[[i]][1]
substring_list <- c("Sr", "Jr", "So", "Fr")
junk <- split[[i]][2]
j <- 1
while(j < 5){
new.junk <- strsplit(junk, substring_list[j])
if(length(new.junk[[1]]) == 2){
high.school[i, 'Class'] <- substring_list[j]
high.school[i, 'High.School'] <- new.junk[[1]][2]
j <- 5
}
if(length(new.junk[[1]]) == 1){
j <- j + 1
}
}
}
if(r == 1 & q ==1){
all.stats <- high.school
}
else{
all.stats <- rbind(all.stats, high.school)
print(nrow(all.stats))
}
}
}
View(all.stats)
my.states
readLines(http://www.maxpreps.com/leaders/basketball/,scoring/alaska/stat-leaders-2.htm?classyear=all&position=all)
readLines("http://www.maxpreps.com/leaders/basketball/,scoring/alaska/stat-leaders-2.htm?classyear=all&position=all")
maxpreps <- c("http://www.maxpreps.com/leaders/basketball/,scoring/alaska/stat-leaders-2.htm?classyear=all&position=all")
stats = maxpreps %>%
read_html() %>%
html_table()
maxpreps <- c("http://www.maxpreps.com/leaders/basketball/,scoring/alaska/stat-leaders-2.htm?classyear=all&position=all")
stats = maxpreps %>%
read_html() %>%
html_table()
library(tidyverse)
2+2
