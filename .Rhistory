#
# players1=list()
# players1=sapply(t, function(x){x$getElementText()})
# head(players1)
library(rvest)
#prep.circuit <- 'https://www.prepcircuit.com/stats/league_instance/58521?subseason=412391'
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
t <- remDr$findElements(using = 'class name', value = "")
players1=c()
players1=sapply(t, function(x){x$getElementText()})
teams2 <- c(players1)
teams2
t <- remDr$findElements(using = 'class name', value = "")
player.class <- ""
t <- remDr$findElements(using = 'class name', value = player.class)
webElem <- remDr$findElements('class name', 'statPlayer ')
webElem$highlightElement()
webElem <- remDr$findElement('class name', 'statPlayer ')
webElem$highlightElement()
webElem <- remDr$findElement('class', 'statPlayer ')
webElem <- remDr$findElement('class', 'statPlayer\\s+')
webElem$highlightElement()
webElem <- remDr$findElement('class', 'statPlayer\s+')
webElem$highlightElement()
t <- remDr$findElements(using = 'class name', value = "odd")
t$highlightElement
t$highlightElement()
players1=c()
players1=sapply(t, function(x){x$getElementText()})
teams2 <- c(players1)
teams2
t <- remDr$findElements(using = 'class name', value = team.class)
t$getElementAttribute('href')
team.class <- 'teamName'
t <- remDr$findElements(using = 'class name', value = team.class)
t$getElementAttribute('href')
t <- remDr$findElements(using = 'class name', value = team.class)
t$getElementAttributes('href')
odd.players=c()
odd.players=sapply(t, function(x) {x$getElementAttribute('href')})
odd.players <- c(players1)
odd.players
t <- remDr$findElements(using = 'class name', value = team.class)
t <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
odd.players=c()
odd.players=sapply(t, function(x) {x$getElementAttribute('href')})
odd.players
t <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
odd.players=c()
odd.players=sapply(t, function(x) {x$getElementAttribute('href')})
odd.players
View(odd.players)
t <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
odd.players=c()
odd.players=sapply(t, function(x) {x$getElementAttribute('href')})
View(odd.players)
t <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
odd.players=c()
odd.players=sapply(t, function(x) {x$getElementAttribute('href')})
View(odd.players)
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
team.class <- 'teamName'
#
#?remDr$executeScript
# player.class <- 'even'
#
odd.tag <- "odd"
t <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
odd.players=c()
odd.players=sapply(t, function(x) {x$getElementAttribute('href')})
View(odd.players)
next.tag <- '.paginationElement:nth-child(1) a:nth-child(14)'
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
View(odd.players2)
t2 <- remDr$findElements(using = 'class name', value = team.class)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
View(odd.players2)
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
t3 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
Sys.sleep(time = 4)
odd.players3=c()
odd.players3=sapply(t3, function(x) {x$getElementAttribute('href')})
View(odd.players3)
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
score <- remDr$findElement(using = 'css selector', value = next.tag)
score$clickElement()
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
shots  <- shots[, -c(1:4)]
#View(shots)
library(tidyverse)
summary <- shots %>% group_by(Uncontested, shot.value) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
contested.twos <- shots %>% filter(Uncontested = 0, shot.value = 2)
summary.bad.twos <- contested.twos %>% group_by(Jumper, Layup, Dunk,
`Tip In`, Floater) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary.bad.twos
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
shots  <- shots[, -c(1:4)]
#View(shots)
library(tidyverse)
summary <- shots %>% group_by(Uncontested, shot.value) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
contested.twos <- shots %>% filter(Uncontested == 0, shot.value == 2)
summary.bad.twos <- contested.twos %>% group_by(Jumper, Layup, Dunk,
`Tip In`, Floater) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary.bad.twos
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
shots  <- shots[, -c(1:4)]
#View(shots)
library(tidyverse)
summary <- shots %>% group_by(Uncontested, shot.value) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
contested.twos <- shots %>% filter(Uncontested == 0, shot.value == 2)
summary.contest.twos <- contested.twos %>% group_by(Jumper, Layup, Dunk,
`Tip In`, Floater) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary.contest.twos
uncontested.twos <- shots %>% filter(Uncontested == 1, shot.value == 2)
summary.uncontest.twos <- uncontested.twos %>% group_by(Jumper, Layup, Dunk,
`Tip In`, Floater) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary.uncontest.twos
?sort
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
shots  <- shots[, -c(1:4)]
#View(shots)
library(tidyverse)
summary <- shots %>% group_by(Uncontested, shot.value) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
contested.twos <- shots %>% filter(Uncontested == 0, shot.value == 2)
summary.contest.twos <- contested.twos %>% group_by(Jumper, Layup, Dunk,
`Tip In`, Floater) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary.contest.twos[order(summary.uncontest.twos$`Points Per Shot`),]
uncontested.twos <- shots %>% filter(Uncontested == 1, shot.value == 2)
summary.uncontest.twos <- uncontested.twos %>% group_by(Jumper, Layup, Dunk,
`Tip In`, Floater) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary.uncontest.twos[order(summary.uncontest.twos$`Points Per Shot`),]
summary.contest.twos[order(summary.contest.twos$`Points Per Shot`),]
summary.uncontest.twos[order(summary.uncontest.twos$`Points Per Shot`),]
summary.contest.twos[order(summary.contest.twos$`Points Per Shot`),]
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
shots  <- shots[, -c(1:4)]
#View(shots)
library(tidyverse)
summary <- shots %>% group_by(Uncontested, shot.value) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
summary <- shots %>% group_by(Uncontested, shot.value, `Jumper`) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
View(summary)
summary <- jumpers %>% group_by(Uncontested, shot.value, `Jumper`) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
jumpers <- shots %>% dplyr::filter(Jumper == 1)
summary <- jumpers %>% group_by(Uncontested, shot.value, `Jumper`) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
View(summary)
View(shots)
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
View(shots)
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
shots  <- shots[, -c(1:4)]
#View(shots)
library(tidyverse)
cam <- shots %>% dplyr::filter(Player == '13 Johnson Cameron')
kenny <- shots %>% dplyr::filter(Player == '24 Williams Kenny')
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
cam <- shots %>% dplyr::filter(Player == '13 Johnson Cameron')
kenny <- shots %>% dplyr::filter(Player == '24 Williams Kenny')
cam <- shots %>% dplyr::filter(Player == '13 Johnson Cameron')
kenny <- shots %>% dplyr::filter(Player == '24 Williams Kenny')
jumpers <- shots %>% dplyr::filter(Jumper == 1)
summary <- jumpers %>% group_by(Player, Uncontested,
shot.value,
`Jumper`) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
cam
kenny
setwd('~/Duke.Basketball/shot.predictor')
library(readr)
library(tidyverse)
threes <- read_csv("ACC3PT.csv")
twos <- read_csv("ACC2PT.csv")
twos <- twos %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
threes <- threes %>% dplyr::select(-`Right Block Right Shoulder No Dribble Move_1`,
-`Sum (check)`)
colnames(threes)[colnames(threes) == 'threeptmade'] <- 'made'
colnames(threes)[colnames(threes) == 'threeptmiss'] <- 'missed'
threes$shot.value <- c(3)
twos$shot.value <- c(2)
colnames(twos)[colnames(twos) == '2 pt Made'] <- 'made'
colnames(twos)[colnames(twos) == '2 pt Missed'] <- 'missed'
twos <- twos %>% select(-`Zone-Paint`,
-`Zone-Lbaseline`,
-`Zone-Rbaseline`,
-`2F`,  -`2+1`)
threes <- threes %>% select(-`Zone-Lcorner`,
-`Zone-Rcorner`,
-`3F`,
-`3+1`)
colnames(threes)[colnames(threes) %in% colnames(twos) == FALSE]
shots <- rbind(twos, threes)
table <- sapply(twos, function(x)all(any(is.na(x))))
set.seed(1990)
cam.kenny <- shots %>% dplyr::filter(Player == '13 Johnson Cameron' |
Player == '24 Williams Kenny')
#kenny <- shots %>% dplyr::filter()
jumpers <- cam.kenny %>% dplyr::filter(Jumper == 1)
summary <- jumpers %>% group_by(Player, Uncontested,
shot.value,
`Jumper`) %>%
summarise(Number = n(), `Points Per Shot` = mean(made*shot.value))
summary
View(summary)
setwd("~/analytics/recruiting project")
prep <- c("https://www.prepcircuit.com/stats/league_instance/34558?subseason=245525")
library(RSelenium)
rD <- rsDriver(browser = 'firefox')
remDr <- rD[["client"]]
remDr$navigate(prep)
team.class <- '/statPlayer/s'
next.class  <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
i <- 1
while(i < 31){
if(i > 1){
score <- remDr$findElement(using = 'css selector', value = next.class)
score$clickElement()
Sys.sleep(time = 2)
}
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
if(i == 1){
all.teams <- new.teams
}
else{
all.teams <- c(new.teams, all.teams)
}
i = i + 1
}
unique.teams <- unique(all.teams)
unique.teams
team.class <- '/statPlayer/\s'
next.class  <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams
team.class <- 'statPlayer\\s+'
next.class  <- '.paginationElement:nth-child(1) .current+ a'
prep.teams <- data.frame(link = c(0))
t2 <- remDr$findElements(using = 'class name', value = team.class)
#t$getElementAttributes('href')
#Sys.sleep(time = 4)
odd.players2=c()
odd.players2=sapply(t2, function(x) {x$getElementAttribute('href')})
new.teams <- odd.players2[which(odd.players2 != "")]
new.teams <- do.call( rbind, new.teams)[,1]
new.teams
